// scss/pages/_tarjeta.scss
@use '../base/variables' as v;
@use '../base/mixins' as m;

/* Container */
.tarjeta-page {
  .tarjeta-hero {
    padding: 1.25rem;
    border-radius: 14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(250,250,255,0.98));
    box-shadow: 0 10px 30px rgba(16,24,40,0.06);
  }

  .tarjeta-header {
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:1rem;
    margin-bottom:1rem;
    .title { margin:0; font-size:1.2rem; font-weight:700; }
    .subtitle { margin:0; color: v.$muted; font-size:.95rem; }
  }
}

/* Root shell */
.tarjeta-root { width:100%; }

/* Tarjeta shell */
.tarjeta-shell {
  display:flex;
  flex-direction:column;
  gap:1rem;
}

/* top row: code + progress */
.tarjeta-top {
  display:flex;
  gap:1rem;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;

  .tarjeta-qrcode {
    display:flex;
    gap:.75rem;
    align-items:center;

    .qr-box {
      width:84px; height:84px; border-radius:10px; overflow:hidden;
      background: linear-gradient(180deg,#f8fafc,#fff);
      display:flex; align-items:center; justify-content:center;
      box-shadow: 0 6px 16px rgba(16,24,40,0.06);
    }
    .qr-img { width:72px; height:72px; object-fit:cover; }
    .tarjeta-code { font-size:.95rem; color:#111827; .code-value { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; display:block; margin-top:.25rem; word-break:break-word; max-width:220px; }
    }
  }

  .tarjeta-progress {
    display:flex;
    gap:1rem;
    align-items:center;

    .progress-ring { width:120px; height:120px; position:relative; }
    .ring-svg { width:120px; height:120px; transform: rotate(-90deg); }
    .ring-bg { fill:none; stroke:#f3f4f6; stroke-width:12; }
    .ring-fg { fill:none; stroke: #10b981; stroke-width:12; stroke-linecap: round; transition: stroke-dashoffset .6s ease; }

    .progress-meta {
      display:flex;
      flex-direction:column;
      gap:.25rem;
      .progress-num { font-size:1.05rem; font-weight:800; }
      .progress-label { color: v.$muted; font-size:.9rem; }
      .next-reward { margin-top:0.5rem; display:flex; justify-content:space-between; gap: .6rem; align-items:center;
        .nr-desc { color:#374151; font-size:.95rem; }
        .nr-badge { background:#f1f5f9; padding:.25rem .45rem; border-radius:999px; font-weight:700; font-size:.85rem; }
      }
    }
  }
}

/* grid of cells */
.tarjeta-grid {
  display:grid;
  gap:10px;
  grid-template-columns: repeat(auto-fill, minmax(56px, 1fr));
  width:100%;
  max-width:760px;
  margin-top: .6rem;

  .cell {
    position:relative;
    height:64px;
    border-radius:10px;
    background:#fff;
    border:1px solid #eef2f6;
    display:flex;
    align-items:center;
    justify-content:center;
    transition: transform .16s ease, box-shadow .16s ease, background .2s ease;
    .cell-number { font-weight:700; font-size:1rem; color:#111827; }
    .cell-badge { position:absolute; right:8px; top:8px; font-size:16px; cursor:pointer; transition: transform .12s ease; &.disabled{ opacity:.45; cursor:default; } }
  }
  .cell--filled {
    background: linear-gradient(90deg,#10b981,#34d399);
    color: #fff;
    transform: translateY(-6px);
    box-shadow: 0 10px 30px rgba(16,24,40,0.08);
  }
}

/* actions */
.tarjeta-actions { display:flex; gap:.6rem; margin-top:.75rem; }

/* recompensas list */
.recompensas-root { margin-top:12px;
  .recompensas-panel { padding:.6rem; display:flex; flex-direction:column; gap:.45rem; }
  .recomp-item { display:flex; justify-content:space-between; gap: .6rem; align-items:center; padding:.45rem .5rem; border-bottom:1px solid #f3f6f8;
    .ri-left { min-width:0; strong{ display:block; font-size:.98rem; } .muted { color: v.$muted; font-size:.9rem; } }
    .ri-right { display:flex; gap:.5rem; align-items:center; }
  }
}

/* small / utility */
.muted { color: v.$muted; font-size:.92rem; }
.badge { padding:.2rem .45rem; border-radius:999px; font-weight:700; font-size:.82rem; }
.badge--success { background:#ecfdf5; color:#065f46; }
.badge--danger { background:#fff1f2; color:#7f1d1d; }

/* responsive */
@include m.tablet {
  .tarjeta-top { flex-wrap:nowrap; }
  .tarjeta-grid { grid-template-columns: repeat(auto-fill, minmax(48px, 1fr)); }
}
/* Modal styles - a√±adir a scss/pages/_tarjeta.scss */
.modal-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(6, 8, 15, 0.5);
  z-index: 1200;
  padding: 1.2rem;
  backdrop-filter: blur(4px);
}

.modal-dialog {
  width: 100%;
  max-width: 560px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 20px 50px rgba(10,10,20,0.25);
  overflow: hidden;
  animation: modal-in .18s ease;
}

@keyframes modal-in {
  from { transform: translateY(8px) scale(.99); opacity: 0; }
  to { transform: translateY(0) scale(1); opacity: 1; }
}

.modal-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: .9rem 1rem;
  border-bottom: 1px solid #f3f4f6;
  h2 { margin:0; font-size:1.05rem; }
  .modal-close {
    background:transparent;
    border:0;
    font-size:1.45rem;
    line-height:1;
    cursor:pointer;
    padding:.1rem .4rem;
  }
}

.modal-body {
  padding: 1rem;
  .modal-desc { margin-bottom:.6rem; color: #374151; }
  .modal-recompensa {
    display:flex;
    justify-content:space-between;
    gap:.6rem;
    align-items:center;
    padding:.6rem;
    border-radius:8px;
    background:#f8fafc;
    .nr-desc { color:#111827; }
    .mr-right { min-width:80px; text-align:right; }
  }
  .modal-feedback { margin-top:.6rem; color:#b91c1c; }
}

.modal-footer {
  display:flex;
  gap:.6rem;
  justify-content:flex-end;
  align-items:center;
  padding: .75rem 1rem;
  border-top: 1px solid #f3f4f6;
}

.modal-open { overflow: hidden; } // utility para body cuando modal abierto
